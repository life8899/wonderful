%% ---------------------------------------------------
%% CIS 400 project 9
%% this is the work of Xiaozhi Li for class CIS 400 CSBD
%% this file is writen under the guidence of the course, which is taught
%% by Professor Shiu-Kai Chin

%% 2017/11/1
%% ---------------------------------------------------
\documentclass{report}
\title{Report for Project09}
\author{\textbf{Xiaozhi Li}}
\date{\today}



%% Formats:
%% ---------------------------------------------------
%% 634format specifies the format of our reports
%% ---------------------------------------------------
\usepackage{634format}

%% ---------------------------------------------------
%% enumerate
%% ---------------------------------------------------
\usepackage{enumerate}

%% ---------------------------------------------------
%% listings is used for including our source code in reports
%% ---------------------------------------------------
\usepackage{listings}
\usepackage{textcomp}

%% ---------------------------------------------------
%% Packages for math environments
%% ---------------------------------------------------
\usepackage{amsmath}

%% ---------------------------------------------------
%% Packages for URLs and hotlinks in the table of contents
%% and symbolic cross references using \ref
%% ---------------------------------------------------
\usepackage{hyperref}

%% ---------------------------------------------------
%% Packages for using HOL-generated macros and displays
%% ---------------------------------------------------
%% end of formats

\usepackage{holtex}
\usepackage{holtexbasic}
\input{commands}
\input{../HOL/HOLReports/HOLcryptoExercises}
\input{../HOL/HOLReports/HOLcipher}



\begin{document}
%% --------------------------------------------------- the listings
%% parameter "language" is set to "ML"
%% ---------------------------------------------------
\lstset{language=ML}


\maketitle{}

\begin{abstract}
  Project 09 using \LaTeX{}. In this project we use HOL to practice cryptographic operations.
  In this project the theorems are coded in HOL and generated using EmitTeX. All HOL source files are included in the HOL folder.
 \end{abstract}

\begin{acknowledgments}
 This report follows the hand book Certified Security by Design Using Higer Order Logic, and course instructions from CIS400-CSBD.
 \end{acknowledgments}


%% ---------------------------------------------------
%% table of contents
%% ---------------------------------------------------
\tableofcontents{}

\chapter{Executive Summary}


\textbf{All requirements for this project are satisfied}.
Specifically, we utilized HOL to prove the following theorems:
\begin{quote}
  \emph{exercise15_6_1a_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXOneaXXthm
  \emph{exercise15_6_1b_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXOnebXXthm
  \emph{exercise15_6_2a_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXTwoaXXthm
  \emph{exercise15_6_2b_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXTwobXXthm
  \emph{exercise15_6_3_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXThreeXXthm
  \end{quote}



\chapter{Exercise 15.6.1}
\label{1561a}
%% ---------------------------------------------------
%% problem statement
%% ---------------------------------------------------

\section{Problem Statement}
We used properties of symmetric key encryption and decryption in cipherTheory to prove the following theorems
\emph{exercise15_6_1a_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXOneaXXthm
\emph{exercise15_6_1b_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXOnebXXthm

\section{HOL Code}
\label{HOl Code 1561}
Here is the relevant code for 15.6.1:
\begin {lstlisting}[frame=trBL]
  (*15.6.1 A*)

  val exercise15_6_1a_thm = TAC_PROOF( ([], ``! key enMsg
  message. (deciphS key enMsg = SOME message) <=> (enMsg = Es key
  (SOME message))``), ASM_REWRITE_TAC [deciphS_one_one]);

  (*15.6.1 B*)
  val exercise15_6_1b_thm =
  TAC_PROOF(
  ([],
  ``! keyAlice k text.
  (deciphS keyAlice (Es k (SOME text)) =
  SOME "This is from Alice") <=>
  (k = keyAlice) /\ (text = "This is from Alice")``),
  ASM_REWRITE_TAC [deciphS_one_one] THEN
  PROVE_TAC[]
  );
\end{lstlisting}

\section{Session Transcript}
\label{Session Trans1561}

\setcounter{sessioncount}{0}
\begin{session}
  \begin{scriptsize}
\begin{verbatim}

> # # # # # # val exercise15_6_1a_thm =
TAC_PROOF(
([],
``! key enMsg message. (deciphS key enMsg =
 SOME message) <=> (enMsg = Es key (SOME message))``),
ASM_REWRITE_TAC [deciphS_one_one]);

val _ = save_thm("exercise15_6_1a_thm",exercise15_6_1a_thm);
# # # # <<HOL message: inventing new type variable names: 'a>>
val exercise15_6_1a_thm =
    []
|- !(key :symKey) (enMsg :'a symMsg) (message :'a).
     (deciphS key enMsg = SOME message) <=>
     (enMsg = Es key (SOME message)):
   thm
> > > val exercise15_6_1b_thm =
TAC_PROOF(
([],
``! keyAlice k text.
(deciphS keyAlice (Es k (SOME text)) =
SOME "This is from Alice") <=>
(k = keyAlice) /\ (text = "This is from Alice")``),
ASM_REWRITE_TAC [deciphS_one_one] THEN
PROVE_TAC[]
);
# # # # # # # # # Meson search level: ........................
val exercise15_6_1b_thm =
    []
|- !(keyAlice :symKey) (k :symKey) (text :string).
     (deciphS keyAlice (Es k (SOME text)) =
      SOME "This is from Alice") <=>
     (k = keyAlice) /\ (text = "This is from Alice"):
   thm
\end{verbatim}
  \end{scriptsize}
\end{session}

%% Explain the Result, should it be nessesary
\section{Explain Result}
\label{eplain re 1561}
Hol is showing our theorem with no type errors, this means our tests have passed.

%-----------------------
%

\chapter{Exercise 15.6.2}
\label{ex 952}

\section{Problem Statement}
\label{problem state 952}
For 15.6.2 We used properties of asymmetric key encryption and decryption to prove the following theorems:
\emph{exercise15_6_2a_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXTwoaXXthm
\emph{exercise15_6_2b_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXTwobXXthm

\section{HOL Code}
\label{HOl Code 1562}
Here is the relevant code for 15.6.2

\begin {lstlisting}[frame=trBL]

(* 15.6.2 A *)
val exercise15_6_2a_thm =
TAC_PROOF(
([],
``! P message.
(deciphP (pubK P) enMsg = SOME message)<=>
(enMsg = Ea (privK P) (SOME message))``),
PROVE_TAC[deciphP_one_one]
);(* 15.6.2 A *)
val exercise15_6_2a_thm =
TAC_PROOF(
([],
``! P message.
(deciphP (pubK P) enMsg = SOME message)<=>
(enMsg = Ea (privK P) (SOME message))``),
PROVE_TAC[deciphP_one_one]
);


(* 15.6.2 B *)

val exercise15_6_2b_thm =
TAC_PROOF(
([],
``! key text.
(deciphP (pubK Alice) (Ea key (SOME text)) =
SOME "This is from Alice") <=>
(key = privK Alice) ∧ (text = "This is from Alice")``),
ASM_REWRITE_TAC[deciphP_one_one] THEN
ASM_REWRITE_TAC[option_CLAUSES]);

\end{lstlisting}


\section{Session Transcript}
\label{Session Trans 1562}
Here is the transcript for 15.6.2
\setcounter{sessioncount}{0}
\begin{session}
  \begin{scriptsize}
\begin{verbatim}

> # # # # # # # # # #  val exercise15_6_2a_thm =
TAC_PROOF(
([],
``! P message.
(deciphP (pubK P) enMsg = SOME message)<=>
(enMsg = Ea (privK P) (SOME message))``),
PROVE_TAC[deciphP_one_one]
);

# # # # # # # <<HOL message: inventing new type variable names: 'a, 'b>>
Meson search level: ..........
val exercise15_6_2a_thm =
    []
|- !(P :'a) (message :'b).
     (deciphP (pubK P) (enMsg :('b, 'a) asymMsg) = SOME message) <=>
     (enMsg = Ea (privK P) (SOME message)):
   thm
> > val exercise15_6_2b_thm =
TAC_PROOF(
([],
``! key text.
(deciphP (pubK Alice) (Ea key (SOME text)) =
SOME "This is from Alice") <=>
(key = privK Alice) ∧ (text = "This is from Alice")``),
ASM_REWRITE_TAC[deciphP_one_one] THEN
ASM_REWRITE_TAC[option_CLAUSES])
;
# # # # # # # # # <<HOL message: inventing new type variable names: 'a>>
val exercise15_6_2b_thm =
    []
|- !(key :'a pKey) (text :string).
     (deciphP (pubK (Alice :'a)) (Ea key (SOME text)) =
      SOME "This is from Alice") <=>
     (key = privK Alice) /\ (text = "This is from Alice"):
   thm

\end{verbatim}
  \end{scriptsize}
\end{session}
\section{Explain Result}
\label{explain result 1562}
In 15.6.2, all of our theorem and theory have passed by HOL.


\chapter{Excersice 15.6.3}
\label{Ex 1563}
\section{Problem Statement}
\label{Problem State 1563}
For 15.6.3 we  used the properties of asymmetric key encryption and decryption prove the therom:
\emph{exercise15_6_3_thm}\HOLcryptoExercisesTheoremsexerciseOneFiveXXSixXXThreeXXthm

\section{HOL Code}
\label{HOl Code 1563}
In 15.6.3, our relative HOL code is:
\begin{lstlisting}[frame=trBL]

  (*15.6.3 *)


  val exercise15_6_3_thm =
  TAC_PROOF(
  ([],
  ``! signature.signVerify (pubK Alice) signature
  (SOME "This is from Alice") <=>
  (signature =
  sign (privK Alice) (hash (SOME "This is from Alice")))``),
  ASM_REWRITE_TAC[signVerify_one_one]);
\end{lstlisting}

\section{Session Transcript}
\label{Session Trans 1563}
\setcounter{sessioncount}{0}
\begin{session}


  \begin{scriptsize}
\begin{verbatim}

> # # # # val exercise15_6_3_thm =
TAC_PROOF(
([],
``! signature.signVerify (pubK Alice) signature
(SOME "This is from Alice") <=>
(signature =
sign (privK Alice) (hash (SOME "This is from Alice")))``),
ASM_REWRITE_TAC[signVerify_one_one]);
# # # # # # # <<HOL message: inventing new type variable names: 'a>>
val exercise15_6_3_thm =
    []
|- !(signature :(string digest, 'a) asymMsg).
     signVerify (pubK (Alice :'a)) signature
       (SOME "This is from Alice") <=>
     (signature = sign (privK Alice) (hash (SOME "This is from Alice"))):
   thm
\end{verbatim}
  \end{scriptsize}
\end{session}
\section{Explain Result}
\label{explain result 1563}
All tests from 15.6.3 have been passed in HOL.

% Appendix:

\chapter{Appendix A: source code for cipherScript.sml}
\label{cha:appendix-a:-cipherScript.sml.}
The following code is from \emph{cipherScript.sml}
\lstinputlisting{../HOL/cipherScript.sml.}

\chapter{Appendix B: source code for cryptoExercisesScript.sml}
\label{cha:appendix-a:-cryptoExercisesScript.sml}
The following code is from \emph{cryptoExercisesScript.sml}
\lstinputlisting{../HOL/cryptoExercisesScript.sml}






\end{document}
